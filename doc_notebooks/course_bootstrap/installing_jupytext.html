

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Initial setup for instructors &mdash; Numeric course 0.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Graduate Numerical Techniques for Atmosphere, Ocean and Earth Scientists: EOSC 511 / ATSC 506" href="../../gradsyllabus20.html" />
    <link rel="prev" title="Getting started" href="../../course_bootstrap.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> Numeric course
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../course_bootstrap.html">Getting started</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#General-workflow">General workflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="#installation">installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Building-the-notebooks">Building the notebooks</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Making-the-course-website">Making the course website</a></li>
<li class="toctree-l3"><a class="reference internal" href="#For-MacOS">For MacOS</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../gradsyllabus20.html">Grad Syllabus</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../schedule20.html">Detailed Schedule</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python.html#learning-bash-and-git">Learning bash and git</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python.html#pulling-changes-from-the-github-repository">Pulling changes from the github repository</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python.html#windows-combining-bash-utilities-with-the-windows-cmd-shell">Windows:  Combining bash utilities with the Windows cmd shell</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python.html#working-with-python-modules">Working with python modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python.html#demonstration-code">Demonstration code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python.html#books-and-tutorials">Books and tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../texts.html">Optional texts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../notebook_toc.html">Course/lab descriptions</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Numeric course</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../course_bootstrap.html">Getting started</a> &raquo;</li>
        
      <li>Initial setup for instructors</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/doc_notebooks/course_bootstrap/installing_jupytext.ipynb.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="Initial-setup-for-instructors">
<h1>Initial setup for instructors<a class="headerlink" href="#Initial-setup-for-instructors" title="Permalink to this headline">¶</a></h1>
<div class="section" id="General-workflow">
<h2>General workflow<a class="headerlink" href="#General-workflow" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Always edit py files, treat the ipynb files as read only output storage</p></li>
<li><p>If you forget, you can sync with: <code class="docutils literal notranslate"><span class="pre">jupytext</span> <span class="pre">--sync</span> <span class="pre">thenotebook.py</span></code></p></li>
<li><p>or sync and execute: <code class="docutils literal notranslate"><span class="pre">jupytext</span> <span class="pre">--sync</span> <span class="pre">--execute</span> <span class="pre">thenotebook.py</span></code></p></li>
</ul>
<p>To get familiar with how jupytext works, it would be good to spend some time at <a class="reference external" href="https://jupytext.readthedocs.io/en/latest/?badge=latest">https://jupytext.readthedocs.io/en/latest/?badge=latest</a></p>
<p>The notes below show how to bootstrap a repository with notebooks only committed as python files. That means that the first time through, we need to convert and execute the ipynb versions. Subsequently, jupyter will handle this through the modified jupyter_notebook_config.py described below.</p>
</div>
<div class="section" id="installation">
<h2>installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li><p>Install miniconda if you don’t have it – note that our environment will be 100% conda-forge, so you don’t want to use a large existing anaconda installation to create the e213 environment.</p></li>
<li><p>clone the repo:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">phaustin</span><span class="o">/</span><span class="n">numeric</span>
<span class="n">cd</span> <span class="n">numeric</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>cd to the <code class="docutils literal notranslate"><span class="pre">course_utils</span></code> folder and create and activate the numeric environment</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">course_utils</span>
<span class="n">conda</span> <span class="n">env</span> <span class="n">create</span> <span class="o">-</span><span class="n">f</span> <span class="n">numeric</span><span class="o">.</span><span class="n">yml</span>
<span class="n">conda</span> <span class="n">activate</span> <span class="n">numeric</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>Make sure you have a jupyter config folder</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">jupyter</span> <span class="n">notebook</span> <span class="o">--</span><span class="n">generate</span><span class="o">-</span><span class="n">config</span>
</pre></div>
</div>
<p>This should put a <code class="docutils literal notranslate"><span class="pre">jupyter_notebook_config.py</span></code> file in your <code class="docutils literal notranslate"><span class="pre">~/.jupyter</span></code> folder</p>
<ol class="arabic simple" start="5">
<li><p>Replace the config with the one in conda_utils</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cp</span> <span class="n">conda_utils</span><span class="o">/</span><span class="n">jupyter_notebook_config</span><span class="o">.</span><span class="n">py</span> <span class="o">~/.</span><span class="n">jupyter</span><span class="o">/.</span>
</pre></div>
</div>
</div>
<div class="section" id="Building-the-notebooks">
<h2>Building the notebooks<a class="headerlink" href="#Building-the-notebooks" title="Permalink to this headline">¶</a></h2>
<p>We need to track three different flavors of notebook:</p>
<ol class="loweralpha simple">
<li><p>Student versions</p></li>
<li><p>Notebooks with solutions</p></li>
<li><p>Documentation notebooks for website</p></li>
</ol>
<p>At the moment there are two sets, the student notebooks are in <code class="docutils literal notranslate"><span class="pre">numerics/notebooks</span></code> and the documentation notebooks are in <code class="docutils literal notranslate"><span class="pre">numeric/docs/docs_notebooks</span></code></p>
<p>To build from scratch, we need to convert the py files to ipynb files.</p>
<p>To do this:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">numeric</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">scripts/find_notebooks.py</span> <span class="pre">notebooks</span> <span class="pre">notebook_filelist.json</span> <span class="pre">--initial</span></code></p></li>
</ol>
<p>This should create an ipynb file for every py file and a new json file calle <code class="docutils literal notranslate"><span class="pre">notebook_filelist.json</span></code>. We need to execute these, at this point we can suppress all errors:</p>
<p><code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">scripts/jup_build.py</span> <span class="pre">exec-noerrors-nb</span> <span class="pre">notebook_filelist.json</span></code></p>
<p>Repeat this for the docs notebooks:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">scripts</span><span class="o">/</span><span class="n">find_notebooks</span><span class="o">.</span><span class="n">py</span> <span class="n">docs</span><span class="o">/</span><span class="n">doc_notebooks</span> <span class="n">notebook_docs_filelist</span><span class="o">.</span><span class="n">json</span> <span class="o">--</span><span class="n">initial</span>
<span class="n">python</span> <span class="n">scripts</span><span class="o">/</span><span class="n">jup_build</span><span class="o">.</span><span class="n">py</span> <span class="n">exec</span><span class="o">-</span><span class="n">noerrors</span><span class="o">-</span><span class="n">nb</span> <span class="n">notebook_docs_filelist</span><span class="o">.</span><span class="n">json</span>
</pre></div>
</div>
</div>
<div class="section" id="Making-the-course-website">
<h2>Making the course website<a class="headerlink" href="#Making-the-course-website" title="Permalink to this headline">¶</a></h2>
<p>The notebooks (ipynb) and any restructured text (rst) and markdown (md) files are assembled into a website using <a class="reference external" href="https://nbsphinx.readthedocs.io/en/0.5.0/">nbsphinx</a>. To build and deploy with github-pages:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">numeric/docs</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">./build_website.sh</span></code></p></li>
</ol>
<p>and push to github</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">numeric/docs</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">./push_pages.sh</span></code></p></li>
<li><p>Install miniconda for you architecture: <a class="reference external" href="https://docs.conda.io/en/latest/miniconda.html">https://docs.conda.io/en/latest/miniconda.html</a></p></li>
</ol>
</div>
<div class="section" id="For-MacOS">
<h2>For MacOS<a class="headerlink" href="#For-MacOS" title="Permalink to this headline">¶</a></h2>
<ol class="loweralpha simple">
<li><p>Start a terminal and type:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">install</span> <span class="n">git</span>
</pre></div>
</div>
<ol class="loweralpha simple" start="2">
<li><p>cd to your home directory and make a folder called repos</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkdir</span> <span class="n">repos</span>
<span class="n">cd</span> <span class="n">repos</span>
</pre></div>
</div>
<ol class="loweralpha simple" start="3">
<li><p>clone the course repository and cd into it</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">phaustin</span><span class="o">/</span><span class="n">numeric</span>
<span class="n">cd</span> <span class="n">numeric</span>
</pre></div>
</div>
<ol class="loweralpha simple" start="5">
<li><p>cd to the course folder and create and activate the e213 environment</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">conda</span>
<span class="n">conda</span> <span class="n">env</span> <span class="n">create</span> <span class="o">-</span><span class="n">f</span> <span class="n">numeric</span><span class="o">.</span><span class="n">yml</span>
<span class="n">conda</span> <span class="n">activate</span> <span class="n">numeric</span>
</pre></div>
</div>
<ol class="loweralpha simple" start="6">
<li><p>change back to the notebooks folder and start jupyter</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">../</span><span class="n">notebooks</span>
<span class="n">jupyter</span> <span class="n">notebook</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../gradsyllabus20.html" class="btn btn-neutral float-right" title="Graduate Numerical Techniques for Atmosphere, Ocean and Earth Scientists: EOSC 511 / ATSC 506" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../../course_bootstrap.html" class="btn btn-neutral float-left" title="Getting started" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright Numeric project

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>